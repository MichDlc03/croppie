<!DOCTYPE html>
<html>
<head>
    <title>Cargar imagen y recortar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script>
</head>
<body>
    <h1>Cargar imagen y recortar</h1>
    
    <form id="image-form" enctype="multipart/form-data">
        <input type="file" id="image-upload" accept="image/*" required>
    </form>
   <!-- Button trigger modal -->
<button type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Recortar
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        
        <div class="modal-body">
            <div id="upload-demo"></div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save </button>
        </div>
      </div>
    </div>
  </div>
    
    
    <script>
        $(document).ready(function() {
            $('#image-form').submit(function(e) {
                e.preventDefault();
                
                var imageUpload = $('#image-upload')[0];
                var file = imageUpload.files[0];
                var reader = new FileReader();
                
                reader.onload = function(e) {
                    var imageBase64 = e.target.result;
                    $('#upload-demo').croppie('bind', {
                        url: imageBase64
                    });
                };
                
                reader.readAsDataURL(file);
            });
            
            var uploadCrop = $('#upload-demo').croppie({
                enableExif: true,
                viewport: {
                    width: 200,
                    height: 200,
                    type: 'circle'
                },
                boundary: {
                    width: 300,
                    height: 300
                }
            });
        });
    </script>
</body>
</html>
